import{o as d,c as a,d as t,u as S,a as i,b as n,h as N,w as p,l as b,k as f,t as o,F as _,r as C,n as F,f as D,v as O,m as j,I as $,p as V,E as B}from"./app-CsYUhu0f.js";import{d as E,_ as I}from"./AppLayout-Dg7o0n7P.js";import{r as R}from"./BanknotesIcon-6rw1WlOp.js";import{r as G,a as P}from"./ClockIcon-DyLUo1Fa.js";function T(l,h){return d(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"})])}const Z={class:"space-y-6"},z={class:"flex items-center justify-between"},U={class:"flex items-center gap-2"},q={class:"grid grid-cols-2 md:grid-cols-4 gap-3"},H={class:"bg-theme-card border border-theme-border rounded-lg p-4"},J={class:"flex items-center gap-2 mb-2"},K={class:"text-xl font-semibold text-theme-text-primary"},Q={class:"bg-theme-card border border-theme-border rounded-lg p-4"},W={class:"flex items-center gap-2 mb-2"},X={class:"text-xl font-semibold text-success"},Y={class:"bg-theme-card border border-theme-border rounded-lg p-4"},tt={class:"flex items-center gap-2 mb-2"},et={class:"text-xl font-semibold text-theme-text-primary"},st={class:"bg-theme-card border border-theme-border rounded-lg p-4"},rt={class:"flex items-center gap-2 mb-2"},ot={class:"text-xl font-semibold text-success"},nt={class:"bg-theme-card border border-theme-border rounded-lg"},dt={key:0,class:"px-4 py-12 text-center"},at={key:1,class:"divide-y divide-theme-border"},it={class:"flex items-start justify-between mb-3"},lt={class:"flex items-center gap-3"},ct={class:"text-sm font-medium text-theme-text-primary"},mt={class:"text-xs text-theme-text-muted"},ut={class:"flex items-center gap-2"},xt=["onClick"],pt=["onClick"],ht={key:0,class:"mb-3 flex gap-2"},bt=["onClick","disabled"],ft={class:"flex items-center justify-between text-xs mb-2"},_t={class:"text-theme-text-secondary"},yt={class:"text-theme-text-muted"},vt={class:"w-full h-2 bg-theme-surface rounded-full overflow-hidden"},gt={class:"flex items-center justify-between text-xs text-theme-text-muted mt-2"},wt={key:0},kt={key:1},Ct={key:0},Ft={class:"bg-theme-card border border-theme-border rounded-lg"},jt={class:"w-full"},$t={class:"divide-y divide-theme-border"},At={class:"px-4 py-3"},Lt={class:"flex items-center gap-3"},Mt={class:"text-sm text-theme-text-primary"},St={class:"text-xs text-theme-text-muted"},Nt={class:"px-4 py-3 text-right"},Dt={class:"text-sm font-medium text-success"},Ot={class:"px-4 py-3 text-right"},Vt=["onClick"],Gt={__name:"Index",props:{goals:{type:Array,default:()=>[]},stats:{type:Object,default:()=>({})}},setup(l){const h=l,c=s=>new Intl.NumberFormat("fr-FR").format(s||0),A=s=>s?new Date(s).toLocaleDateString("fr-FR",{day:"2-digit",month:"short",year:"numeric"}):"—",y=s=>!s.target_amount||s.target_amount===0?0:Math.min(100,s.current_amount/s.target_amount*100),v=s=>{confirm("Supprimer cet objectif ?")&&V.delete(`/goals/${s.id}`)},x=B(null),m=S({amount:""}),L=s=>{x.value=s.id,m.amount=""},M=s=>{m.post(`/goals/${s.id}/contribute`,{onSuccess:()=>{x.value=null}})},g=$(()=>h.goals.filter(s=>s.status==="active")),w=$(()=>h.goals.filter(s=>s.status==="completed")),k=s=>({savings:"Épargne",debt:"Remboursement",investment:"Investissement",custom:"Personnalisé"})[s]||s;return(s,e)=>(d(),a(_,null,[i(n(N),{title:"Objectifs"}),i(I,null,{default:p(()=>[t("div",Z,[t("div",z,[t("div",U,[i(n(E),{class:"w-5 h-5 text-theme-text-secondary"}),e[2]||(e[2]=t("h1",{class:"text-lg font-semibold text-theme-text-primary"},"Objectifs",-1))]),i(n(b),{href:"/goals/create",class:"px-3 py-1.5 bg-theme-btn-primary-bg text-theme-btn-primary-text text-sm font-medium rounded-md hover:opacity-90 transition-colors"},{default:p(()=>[...e[3]||(e[3]=[f(" + Nouvel objectif ",-1)])]),_:1})]),t("div",q,[t("div",H,[t("div",J,[i(n(R),{class:"w-4 h-4 text-theme-text-secondary"}),e[4]||(e[4]=t("p",{class:"text-xs text-theme-text-secondary uppercase tracking-wider"},"Objectif total",-1))]),t("p",K,o(c(l.stats.total_target)),1),e[5]||(e[5]=t("p",{class:"text-xs text-theme-text-muted"},"FCFA",-1))]),t("div",Q,[t("div",W,[i(n(T),{class:"w-4 h-4 text-success"}),e[6]||(e[6]=t("p",{class:"text-xs text-theme-text-secondary uppercase tracking-wider"},"Épargne actuelle",-1))]),t("p",X,o(c(l.stats.total_current)),1),e[7]||(e[7]=t("p",{class:"text-xs text-theme-text-muted"},"FCFA",-1))]),t("div",Y,[t("div",tt,[i(n(G),{class:"w-4 h-4 text-theme-text-secondary"}),e[8]||(e[8]=t("p",{class:"text-xs text-theme-text-secondary uppercase tracking-wider"},"En cours",-1))]),t("p",et,o(l.stats.active_count||0),1),e[9]||(e[9]=t("p",{class:"text-xs text-theme-text-muted"},"objectif(s)",-1))]),t("div",st,[t("div",rt,[i(n(P),{class:"w-4 h-4 text-success"}),e[10]||(e[10]=t("p",{class:"text-xs text-theme-text-secondary uppercase tracking-wider"},"Complétés",-1))]),t("p",ot,o(l.stats.completed_count||0),1),e[11]||(e[11]=t("p",{class:"text-xs text-theme-text-muted"},"objectif(s)",-1))])]),t("div",null,[e[15]||(e[15]=t("h2",{class:"text-xs font-medium text-theme-text-secondary uppercase tracking-wider mb-3"},"En cours",-1)),t("div",nt,[g.value.length===0?(d(),a("div",dt,[e[13]||(e[13]=t("p",{class:"text-sm text-theme-text-secondary mb-4"},"Aucun objectif en cours",-1)),i(n(b),{href:"/goals/create",class:"text-sm text-theme-text-primary hover:underline"},{default:p(()=>[...e[12]||(e[12]=[f(" Créer un objectif ",-1)])]),_:1})])):(d(),a("div",at,[(d(!0),a(_,null,C(g.value,r=>(d(),a("div",{key:r.id,class:"p-4"},[t("div",it,[t("div",lt,[t("div",{class:"w-2 h-2 rounded-full",style:F({backgroundColor:r.color||"#FFFFFF"})},null,4),t("div",null,[t("p",ct,o(r.name),1),t("p",mt,o(k(r.type)),1)])]),t("div",ut,[t("button",{onClick:u=>L(r),class:"px-2 py-1 text-xs bg-theme-surface border border-theme-border rounded hover:border-white transition-colors"}," + Ajouter ",8,xt),i(n(b),{href:`/goals/${r.id}/edit`,class:"text-xs text-theme-text-secondary hover:text-theme-text-primary"},{default:p(()=>[...e[14]||(e[14]=[f(" Modifier ",-1)])]),_:1},8,["href"]),t("button",{onClick:u=>v(r),class:"text-xs text-theme-text-secondary hover:text-danger"}," Supprimer ",8,pt)])]),x.value===r.id?(d(),a("div",ht,[D(t("input",{"onUpdate:modelValue":e[0]||(e[0]=u=>n(m).amount=u),type:"number",min:"1",placeholder:"Montant",class:"flex-1 bg-theme-surface border border-theme-border rounded-md px-3 py-1.5 text-sm text-theme-text-primary focus:border-white focus:ring-0 outline-none"},null,512),[[O,n(m).amount,void 0,{number:!0}]]),t("button",{onClick:u=>M(r),disabled:n(m).processing||!n(m).amount,class:"px-3 py-1.5 bg-theme-btn-primary-bg text-theme-btn-primary-text text-sm font-medium rounded-md hover:opacity-90 transition-colors disabled:opacity-50"}," Ajouter ",8,bt),t("button",{onClick:e[1]||(e[1]=u=>x.value=null),class:"px-3 py-1.5 text-sm text-theme-text-secondary hover:text-theme-text-primary border border-theme-border rounded-md transition-colors"}," Annuler ")])):j("",!0),t("div",ft,[t("span",_t,o(c(r.current_amount))+" / "+o(c(r.target_amount))+" FCFA ",1),t("span",yt,o(Math.round(y(r)))+"%",1)]),t("div",vt,[t("div",{class:"h-full bg-theme-btn-primary-bg rounded-full transition-all",style:F({width:`${y(r)}%`})},null,4)]),t("div",gt,[r.target_date?(d(),a("span",wt,"Échéance : "+o(A(r.target_date)),1)):(d(),a("span",kt,"Pas d'échéance")),t("span",null,"Reste "+o(c(r.target_amount-r.current_amount))+" FCFA",1)])]))),128))]))])]),w.value.length>0?(d(),a("div",Ct,[e[18]||(e[18]=t("h2",{class:"text-xs font-medium text-theme-text-secondary uppercase tracking-wider mb-3"},"Complétés",-1)),t("div",Ft,[t("table",jt,[e[17]||(e[17]=t("thead",null,[t("tr",{class:"border-b border-theme-border"},[t("th",{class:"px-4 py-3 text-left text-xs font-medium text-theme-text-secondary uppercase tracking-wider"},"Objectif"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-theme-text-secondary uppercase tracking-wider"},"Montant"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-theme-text-secondary uppercase tracking-wider"},"Actions")])],-1)),t("tbody",$t,[(d(!0),a(_,null,C(w.value,r=>(d(),a("tr",{key:r.id,class:"hover:bg-theme-surface transition-colors"},[t("td",At,[t("div",Lt,[e[16]||(e[16]=t("div",{class:"w-2 h-2 rounded-full bg-success"},null,-1)),t("div",null,[t("p",Mt,o(r.name),1),t("p",St,o(k(r.type)),1)])])]),t("td",Nt,[t("span",Dt,o(c(r.target_amount))+" FCFA",1)]),t("td",Ot,[t("button",{onClick:u=>v(r),class:"text-xs text-theme-text-secondary hover:text-danger"}," Supprimer ",8,Vt)])]))),128))])])])])):j("",!0)])]),_:1})],64))}};export{Gt as default};
