import{E as N,o as r,c as a,a as d,b as c,h as V,w as m,d as e,l as u,k as x,f as w,g as C,F as p,r as h,t as n,m as T,n as $,i as F,H as B,p as y}from"./app-CsYUhu0f.js";import{c as E,_ as M}from"./AppLayout-Dg7o0n7P.js";const O={class:"space-y-6"},R={class:"flex items-center justify-between"},z={class:"flex items-center gap-2"},I={class:"flex flex-wrap gap-3"},L=["value"],U={class:"bg-theme-card border border-theme-border rounded-lg"},q={key:0,class:"px-4 py-12 text-center"},H={key:1,class:"w-full"},G={class:"divide-y divide-theme-border"},J={class:"px-4 py-3"},K={class:"flex items-center gap-3"},P={class:"text-sm text-theme-text-primary"},Q={class:"text-xs text-theme-text-muted"},W={class:"px-4 py-3 text-sm text-theme-text-secondary hidden md:table-cell"},X={class:"px-4 py-3 text-sm text-theme-text-secondary hidden sm:table-cell"},Y={class:"px-4 py-3 text-right"},Z={class:"px-4 py-3 text-right"},ee={class:"flex items-center justify-end gap-2"},te=["onClick"],se={key:0,class:"flex justify-center gap-1"},oe={__name:"Index",props:{transactions:{type:Object,required:!0},accounts:{type:Array,default:()=>[]},categories:{type:Array,default:()=>[]},filters:{type:Object,default:()=>({})}},setup(o){const f=o,i=N({type:f.filters.type||"",account_id:f.filters.account_id||""}),S=l=>new Intl.NumberFormat("fr-FR").format(l),j=l=>new Date(l).toLocaleDateString("fr-FR",{day:"2-digit",month:"short",year:"numeric"}),b=()=>{y.get("/transactions",i.value,{preserveState:!0})},A=()=>{i.value={},y.get("/transactions")},D=l=>{confirm("Supprimer cette transaction ?")&&y.delete(`/transactions/${l.id}`)};return(l,s)=>(r(),a(p,null,[d(c(V),{title:"Transactions"}),d(M,null,{default:m(()=>[e("div",O,[e("div",R,[e("div",z,[d(c(E),{class:"w-5 h-5 text-theme-text-secondary"}),s[2]||(s[2]=e("h1",{class:"text-lg font-semibold text-theme-text-primary"},"Transactions",-1))]),d(c(u),{href:"/transactions/create",class:"px-3 py-1.5 bg-theme-btn-primary-bg text-theme-btn-primary-text text-sm font-medium rounded-md hover:opacity-90 transition-colors"},{default:m(()=>[...s[3]||(s[3]=[x(" + Nouvelle ",-1)])]),_:1})]),e("div",I,[w(e("select",{"onUpdate:modelValue":s[0]||(s[0]=t=>i.value.type=t),onChange:b,class:"bg-theme-card border border-theme-border rounded-md px-3 py-1.5 text-sm text-theme-text-primary focus:border-white focus:ring-0 outline-none"},[...s[4]||(s[4]=[e("option",{value:""},"Tous types",-1),e("option",{value:"expense"},"Dépenses",-1),e("option",{value:"income"},"Revenus",-1),e("option",{value:"transfer"},"Transferts",-1)])],544),[[C,i.value.type]]),w(e("select",{"onUpdate:modelValue":s[1]||(s[1]=t=>i.value.account_id=t),onChange:b,class:"bg-theme-card border border-theme-border rounded-md px-3 py-1.5 text-sm text-theme-text-primary focus:border-white focus:ring-0 outline-none"},[s[5]||(s[5]=e("option",{value:""},"Tous comptes",-1)),(r(!0),a(p,null,h(o.accounts,t=>(r(),a("option",{key:t.id,value:t.id},n(t.name),9,L))),128))],544),[[C,i.value.account_id]]),Object.values(i.value).some(t=>t)?(r(),a("button",{key:0,onClick:A,class:"text-xs text-theme-text-secondary hover:text-theme-text-primary"}," Effacer ")):T("",!0)]),e("div",U,[o.transactions.data.length===0?(r(),a("div",q,[s[7]||(s[7]=e("p",{class:"text-sm text-theme-text-secondary mb-4"},"Aucune transaction",-1)),d(c(u),{href:"/transactions/create",class:"text-sm text-theme-text-primary hover:underline"},{default:m(()=>[...s[6]||(s[6]=[x(" Ajouter une transaction ",-1)])]),_:1})])):(r(),a("table",H,[s[9]||(s[9]=e("thead",null,[e("tr",{class:"border-b border-theme-border"},[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-theme-text-secondary uppercase tracking-wider"},"Transaction"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-theme-text-secondary uppercase tracking-wider hidden md:table-cell"},"Compte"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-theme-text-secondary uppercase tracking-wider hidden sm:table-cell"},"Date"),e("th",{class:"px-4 py-3 text-right text-xs font-medium text-theme-text-secondary uppercase tracking-wider"},"Montant"),e("th",{class:"px-4 py-3 text-right text-xs font-medium text-theme-text-secondary uppercase tracking-wider"},"Actions")])],-1)),e("tbody",G,[(r(!0),a(p,null,h(o.transactions.data,t=>{var g,v,_,k;return r(),a("tr",{key:t.id,class:"hover:bg-theme-surface transition-colors"},[e("td",J,[e("div",K,[e("div",{class:"w-2 h-2 rounded-full",style:$({backgroundColor:((g=t.category)==null?void 0:g.color)||"#71717A"})},null,4),e("div",null,[e("p",P,n(t.beneficiary||((v=t.category)==null?void 0:v.name)||"Transaction"),1),e("p",Q,n(((_=t.category)==null?void 0:_.name)||"Sans catégorie"),1)])])]),e("td",W,n((k=t.account)==null?void 0:k.name),1),e("td",X,n(j(t.date)),1),e("td",Y,[e("span",{class:F(["text-sm font-medium",t.type==="income"?"text-success":"text-theme-text-primary"])},n(t.type==="income"?"+":"-")+n(S(t.amount)),3)]),e("td",Z,[e("div",ee,[d(c(u),{href:`/transactions/${t.id}/edit`,class:"text-xs text-theme-text-secondary hover:text-theme-text-primary"},{default:m(()=>[...s[8]||(s[8]=[x(" Modifier ",-1)])]),_:1},8,["href"]),e("button",{onClick:re=>D(t),class:"text-xs text-theme-text-secondary hover:text-danger"}," Supprimer ",8,te)])])])}),128))])]))]),o.transactions.last_page>1?(r(),a("div",se,[(r(!0),a(p,null,h(o.transactions.last_page,t=>(r(),B(c(u),{key:t,href:`/transactions?page=${t}`,class:F(["px-3 py-1 text-sm rounded-md transition-colors",t===o.transactions.current_page?"bg-theme-btn-primary-bg text-theme-btn-primary-text":"text-theme-text-secondary hover:text-theme-text-primary"]),"preserve-scroll":""},{default:m(()=>[x(n(t),1)]),_:2},1032,["href","class"]))),128))])):T("",!0)])]),_:1})],64))}};export{oe as default};
