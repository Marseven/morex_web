import{o as d,c as i,d as e,a as n,b as r,h as $,w as g,l as f,k as v,t as l,i as x,F as k,r as A,n as w,m as _,p as M}from"./app-BtzvA-UR.js";import{b as S,_ as j}from"./AppLayout-7DTErr4F.js";import{r as N}from"./BanknotesIcon-DTEr7dOj.js";import{r as D}from"./CalculatorIcon-DnIeiYbU.js";function L(y,u){return d(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function V(y,u){return d(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})])}const P={class:"space-y-6"},R={class:"flex items-center justify-between"},Z={class:"flex items-center gap-2"},z={class:"grid grid-cols-2 md:grid-cols-4 gap-3"},I={class:"bg-theme-card border border-theme-border rounded-lg p-4"},W={class:"flex items-center gap-2 mb-2"},E={class:"text-xl font-semibold text-theme-text-primary"},H={class:"bg-theme-card border border-theme-border rounded-lg p-4"},T={class:"flex items-center gap-2 mb-2"},q={class:"text-xl font-semibold text-theme-text-primary"},G={class:"bg-theme-card border border-theme-border rounded-lg p-4"},J={class:"flex items-center gap-2 mb-2"},K={class:"bg-theme-card border border-theme-border rounded-lg p-4"},O={class:"flex items-center gap-2 mb-2"},Q={class:"bg-theme-card border border-theme-border rounded-lg"},U={key:0,class:"px-4 py-8 text-center"},X={key:1,class:"w-full"},Y={class:"divide-y divide-theme-border"},ee={class:"px-4 py-3"},te={class:"flex items-center gap-3"},se={class:"text-sm text-theme-text-primary"},re={key:0,class:"text-xs text-theme-text-muted"},oe={class:"px-4 py-3 hidden sm:table-cell"},de={key:0,class:"text-sm text-theme-text-primary"},ie={key:1,class:"text-sm text-theme-text-muted"},ne={class:"px-4 py-3 hidden md:table-cell"},le={key:0,class:"space-y-1"},ae={class:"flex items-center justify-between text-xs"},xe={class:"text-theme-text-secondary"},me={class:"w-40 h-1.5 bg-theme-surface rounded-full overflow-hidden"},ce={key:1,class:"text-sm text-theme-text-muted"},ue={class:"px-4 py-3 text-right"},pe={class:"flex items-center justify-end gap-2"},he=["onClick"],ge={class:"bg-theme-card border border-theme-border rounded-lg"},_e={key:0,class:"px-4 py-8 text-center"},ye={key:1,class:"w-full"},be={class:"divide-y divide-theme-border"},fe={class:"px-4 py-3"},ve={class:"flex items-center gap-3"},ke={class:"text-sm text-theme-text-primary"},we={key:0,class:"text-xs text-theme-text-muted"},Ce={class:"px-4 py-3 text-right"},Be={class:"flex items-center justify-end gap-2"},Ae=["onClick"],Ne={__name:"Index",props:{categories:{type:Array,default:()=>[]}},setup(y){const u=y,a=o=>new Intl.NumberFormat("fr-FR").format(o||0),m=u.categories.filter(o=>o.type==="expense"),C=u.categories.filter(o=>o.type==="income"),B=o=>{if(o.is_system){alert("Les catégories système ne peuvent pas être supprimées.");return}confirm("Supprimer cette catégorie ?")&&M.delete(`/budgets/${o.id}`)},c=o=>!o.budget_limit||o.budget_limit===0?0:Math.min(100,(o.spent_this_month||0)/o.budget_limit*100),p=m.reduce((o,t)=>o+(t.budget_limit||0),0),h=m.reduce((o,t)=>o+(t.spent_this_month||0),0),b=m.filter(o=>o.budget_limit>0).filter(o=>(o.spent_this_month||0)>o.budget_limit).length;return(o,t)=>(d(),i(k,null,[n(r($),{title:"Budgets & Catégories"}),n(j,null,{default:g(()=>[e("div",P,[e("div",R,[e("div",Z,[n(r(S),{class:"w-5 h-5 text-theme-text-secondary"}),t[0]||(t[0]=e("h1",{class:"text-lg font-semibold text-theme-text-primary"},"Budgets & Catégories",-1))]),n(r(f),{href:"/budgets/create",class:"px-3 py-1.5 bg-theme-btn-primary-bg text-theme-btn-primary-text text-sm font-medium rounded-md hover:opacity-90 transition-colors"},{default:g(()=>[...t[1]||(t[1]=[v(" + Nouvelle catégorie ",-1)])]),_:1})]),e("div",z,[e("div",I,[e("div",W,[n(r(N),{class:"w-4 h-4 text-theme-text-secondary"}),t[2]||(t[2]=e("p",{class:"text-xs text-theme-text-secondary uppercase tracking-wider"},"Budget total",-1))]),e("p",E,l(a(r(p))),1),t[3]||(t[3]=e("p",{class:"text-xs text-theme-text-muted"},"FCFA / mois",-1))]),e("div",H,[e("div",T,[n(r(L),{class:"w-4 h-4 text-theme-text-secondary"}),t[4]||(t[4]=e("p",{class:"text-xs text-theme-text-secondary uppercase tracking-wider"},"Dépensé ce mois",-1))]),e("p",q,l(a(r(h))),1),t[5]||(t[5]=e("p",{class:"text-xs text-theme-text-muted"},"FCFA",-1))]),e("div",G,[e("div",J,[n(r(D),{class:x(["w-4 h-4",r(p)-r(h)>=0?"text-success":"text-danger"])},null,8,["class"]),t[6]||(t[6]=e("p",{class:"text-xs text-theme-text-secondary uppercase tracking-wider"},"Restant",-1))]),e("p",{class:x(["text-xl font-semibold",r(p)-r(h)>=0?"text-success":"text-danger"])},l(a(r(p)-r(h))),3),t[7]||(t[7]=e("p",{class:"text-xs text-theme-text-muted"},"FCFA",-1))]),e("div",K,[e("div",O,[n(r(V),{class:x(["w-4 h-4",r(b)>0?"text-danger":"text-success"])},null,8,["class"]),t[8]||(t[8]=e("p",{class:"text-xs text-theme-text-secondary uppercase tracking-wider"},"Dépassements",-1))]),e("p",{class:x(["text-xl font-semibold",r(b)>0?"text-danger":"text-success"])},l(r(b)),3),t[9]||(t[9]=e("p",{class:"text-xs text-theme-text-muted"},"catégorie(s)",-1))])]),e("div",null,[t[13]||(t[13]=e("h2",{class:"text-xs font-medium text-theme-text-secondary uppercase tracking-wider mb-3"},"Dépenses",-1)),e("div",Q,[r(m).length===0?(d(),i("div",U,[...t[10]||(t[10]=[e("p",{class:"text-sm text-theme-text-secondary"},"Aucune catégorie de dépense",-1)])])):(d(),i("table",X,[t[12]||(t[12]=e("thead",null,[e("tr",{class:"border-b border-theme-border"},[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-theme-text-secondary uppercase tracking-wider"},"Catégorie"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-theme-text-secondary uppercase tracking-wider hidden sm:table-cell"},"Budget"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-theme-text-secondary uppercase tracking-wider hidden md:table-cell"},"Progression"),e("th",{class:"px-4 py-3 text-right text-xs font-medium text-theme-text-secondary uppercase tracking-wider"},"Actions")])],-1)),e("tbody",Y,[(d(!0),i(k,null,A(r(m),s=>(d(),i("tr",{key:s.id,class:"hover:bg-theme-surface transition-colors"},[e("td",ee,[e("div",te,[e("div",{class:"w-2 h-2 rounded-full",style:w({backgroundColor:s.color||"#71717A"})},null,4),e("div",null,[e("p",se,l(s.name),1),s.is_system?(d(),i("p",re,"Système")):_("",!0)])])]),e("td",oe,[s.budget_limit?(d(),i("span",de,l(a(s.budget_limit))+" FCFA",1)):(d(),i("span",ie,"—"))]),e("td",ne,[s.budget_limit?(d(),i("div",le,[e("div",ae,[e("span",xe,l(a(s.spent_this_month))+" / "+l(a(s.budget_limit)),1),e("span",{class:x(c(s)>100?"text-danger":"text-theme-text-muted")},l(Math.round(c(s)))+"% ",3)]),e("div",me,[e("div",{class:x(["h-full rounded-full transition-all",c(s)>100?"bg-danger":c(s)>80?"bg-warning":"bg-theme-btn-primary-bg"]),style:w({width:`${Math.min(100,c(s))}%`})},null,6)])])):(d(),i("span",ce,"Pas de budget"))]),e("td",ue,[e("div",pe,[n(r(f),{href:`/budgets/${s.id}/edit`,class:"text-xs text-theme-text-secondary hover:text-theme-text-primary"},{default:g(()=>[...t[11]||(t[11]=[v(" Modifier ",-1)])]),_:1},8,["href"]),s.is_system?_("",!0):(d(),i("button",{key:0,onClick:F=>B(s),class:"text-xs text-theme-text-secondary hover:text-danger"}," Supprimer ",8,he))])])]))),128))])]))])]),e("div",null,[t[17]||(t[17]=e("h2",{class:"text-xs font-medium text-theme-text-secondary uppercase tracking-wider mb-3"},"Revenus",-1)),e("div",ge,[r(C).length===0?(d(),i("div",_e,[...t[14]||(t[14]=[e("p",{class:"text-sm text-theme-text-secondary"},"Aucune catégorie de revenu",-1)])])):(d(),i("table",ye,[t[16]||(t[16]=e("thead",null,[e("tr",{class:"border-b border-theme-border"},[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-theme-text-secondary uppercase tracking-wider"},"Catégorie"),e("th",{class:"px-4 py-3 text-right text-xs font-medium text-theme-text-secondary uppercase tracking-wider"},"Actions")])],-1)),e("tbody",be,[(d(!0),i(k,null,A(r(C),s=>(d(),i("tr",{key:s.id,class:"hover:bg-theme-surface transition-colors"},[e("td",fe,[e("div",ve,[e("div",{class:"w-2 h-2 rounded-full",style:w({backgroundColor:s.color||"#71717A"})},null,4),e("div",null,[e("p",ke,l(s.name),1),s.is_system?(d(),i("p",we,"Système")):_("",!0)])])]),e("td",Ce,[e("div",Be,[n(r(f),{href:`/budgets/${s.id}/edit`,class:"text-xs text-theme-text-secondary hover:text-theme-text-primary"},{default:g(()=>[...t[15]||(t[15]=[v(" Modifier ",-1)])]),_:1},8,["href"]),s.is_system?_("",!0):(d(),i("button",{key:0,onClick:F=>B(s),class:"text-xs text-theme-text-secondary hover:text-danger"}," Supprimer ",8,Ae))])])]))),128))])]))])])])]),_:1})],64))}};export{Ne as default};
