import{o as d,c as a,d as t,u as B,a as c,b as r,h as N,w as b,l as f,k as v,t as n,i as y,F as _,r as C,f as P,v as F,m as u,n as S,p as V,E as Z}from"./app-C0xRNuCB.js";import{e as R,_ as E}from"./AppLayout-Dim-hrxc.js";function L(i,h){return d(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m9 12.75 3 3m0 0 3-3m-3 3v-7.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function O(i,h){return d(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m15 11.25-3-3m0 0-3 3m3-3v7.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function T(i,h){return d(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"})])}function z(i,h){return d(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 3v17.25m0 0c-1.472 0-2.882.265-4.185.75M12 20.25c1.472 0 2.882.265 4.185.75M18.75 4.97A48.416 48.416 0 0 0 12 4.5c-2.291 0-4.545.16-6.75.47m13.5 0c1.01.143 2.01.317 3 .52m-3-.52 2.62 10.726c.122.499-.106 1.028-.589 1.202a5.988 5.988 0 0 1-2.031.352 5.988 5.988 0 0 1-2.031-.352c-.483-.174-.711-.703-.59-1.202L18.75 4.971Zm-16.5.52c.99-.203 1.99-.377 3-.52m0 0 2.62 10.726c.122.499-.106 1.028-.589 1.202a5.989 5.989 0 0 1-2.031.352 5.989 5.989 0 0 1-2.031-.352c-.483-.174-.711-.703-.59-1.202L5.25 4.971Z"})])}const H={class:"space-y-6"},I={class:"flex items-center justify-between"},J={class:"flex items-center gap-2"},U={class:"grid grid-cols-2 md:grid-cols-4 gap-3"},q={class:"bg-theme-card border border-theme-border rounded-lg p-4"},G={class:"flex items-center gap-2 mb-2"},K={class:"text-xl font-semibold text-danger"},Q={class:"text-xs text-theme-text-muted"},W={class:"bg-theme-card border border-theme-border rounded-lg p-4"},X={class:"flex items-center gap-2 mb-2"},Y={class:"text-xl font-semibold text-success"},tt={class:"text-xs text-theme-text-muted"},et={class:"bg-theme-card border border-theme-border rounded-lg p-4"},st={class:"flex items-center gap-2 mb-2"},rt={class:"bg-theme-card border border-theme-border rounded-lg p-4"},ot={class:"flex items-center gap-2 mb-2"},nt={key:0},dt={class:"bg-theme-card border border-theme-border rounded-lg divide-y divide-theme-border"},at={class:"flex items-start justify-between mb-3"},it={class:"text-sm font-medium text-theme-text-primary"},lt={class:"text-xs text-theme-text-muted"},ct={class:"flex items-center gap-2"},mt=["onClick"],xt=["onClick"],ut={key:0,class:"mb-3 flex gap-2"},ht=["onClick","disabled"],pt={class:"flex items-center justify-between text-xs mb-2"},bt={class:"text-theme-text-secondary"},yt={class:"text-danger"},ft={class:"w-full h-2 bg-theme-surface rounded-full overflow-hidden"},vt={key:1,class:"text-xs text-theme-text-muted mt-2"},_t={key:1},gt={class:"bg-theme-card border border-theme-border rounded-lg divide-y divide-theme-border"},kt={class:"flex items-start justify-between mb-3"},wt={class:"text-sm font-medium text-theme-text-primary"},Ct={class:"text-xs text-theme-text-muted"},$t={class:"flex items-center gap-2"},Mt=["onClick"],jt=["onClick"],Dt={key:0,class:"mb-3 flex gap-2"},At=["onClick","disabled"],Pt={class:"flex items-center justify-between text-xs mb-2"},Ft={class:"text-theme-text-secondary"},St={class:"text-success"},Bt={class:"w-full h-2 bg-theme-surface rounded-full overflow-hidden"},Nt={key:1,class:"text-xs text-theme-text-muted mt-2"},Vt={key:2,class:"bg-theme-card border border-theme-border rounded-lg px-4 py-12 text-center"},Zt={key:3},Rt={class:"bg-theme-card border border-theme-border rounded-lg"},Et={class:"w-full"},Lt={class:"divide-y divide-theme-border"},Ot={class:"px-4 py-3 text-sm text-theme-text-primary"},Tt={class:"px-4 py-3 text-sm text-right text-theme-text-primary"},zt={class:"px-4 py-3 text-right"},Ht=["onClick"],Ut={__name:"Index",props:{debts:{type:Array,default:()=>[]},stats:{type:Object,default:()=>({})}},setup(i){const h=i,m=o=>new Intl.NumberFormat("fr-FR").format(o||0),$=o=>o?new Date(o).toLocaleDateString("fr-FR",{day:"2-digit",month:"short",year:"numeric"}):"—",g=h.debts.filter(o=>o.status==="active"&&o.type==="debt"),k=h.debts.filter(o=>o.status==="active"&&o.type==="credit"),M=h.debts.filter(o=>o.status==="paid"),w=o=>{confirm("Supprimer cette entrée ?")&&V.delete(`/debts/${o.id}`)},p=Z(null),x=B({amount:""}),j=o=>{p.value=o.id,x.amount=""},D=o=>{x.post(`/debts/${o.id}/payment`,{onSuccess:()=>{p.value=null}})},A=o=>{if(!o.initial_amount)return 0;const e=o.initial_amount-o.current_amount;return Math.min(100,e/o.initial_amount*100)};return(o,e)=>(d(),a(_,null,[c(r(N),{title:"Dettes & Créances"}),c(E,null,{default:b(()=>[t("div",H,[t("div",I,[t("div",J,[c(r(R),{class:"w-5 h-5 text-theme-text-secondary"}),e[4]||(e[4]=t("h1",{class:"text-lg font-semibold text-theme-text-primary"},"Dettes & Créances",-1))]),c(r(f),{href:"/debts/create",class:"px-3 py-1.5 bg-theme-btn-primary-bg text-theme-btn-primary-text text-sm font-medium rounded-md hover:opacity-90 transition-colors"},{default:b(()=>[...e[5]||(e[5]=[v(" + Ajouter ",-1)])]),_:1})]),t("div",U,[t("div",q,[t("div",G,[c(r(L),{class:"w-4 h-4 text-danger"}),e[6]||(e[6]=t("p",{class:"text-xs text-theme-text-secondary uppercase tracking-wider"},"Je dois",-1))]),t("p",K,n(m(i.stats.total_debt)),1),t("p",Q,n(i.stats.active_debts)+" dette(s)",1)]),t("div",W,[t("div",X,[c(r(O),{class:"w-4 h-4 text-success"}),e[7]||(e[7]=t("p",{class:"text-xs text-theme-text-secondary uppercase tracking-wider"},"On me doit",-1))]),t("p",Y,n(m(i.stats.total_credit)),1),t("p",tt,n(i.stats.active_credits)+" créance(s)",1)]),t("div",et,[t("div",st,[c(r(z),{class:y(["w-4 h-4",i.stats.total_credit-i.stats.total_debt>=0?"text-success":"text-danger"])},null,8,["class"]),e[8]||(e[8]=t("p",{class:"text-xs text-theme-text-secondary uppercase tracking-wider"},"Position nette",-1))]),t("p",{class:y(["text-xl font-semibold",i.stats.total_credit-i.stats.total_debt>=0?"text-success":"text-danger"])},n(m(i.stats.total_credit-i.stats.total_debt)),3),e[9]||(e[9]=t("p",{class:"text-xs text-theme-text-muted"},"FCFA",-1))]),t("div",rt,[t("div",ot,[c(r(T),{class:y(["w-4 h-4",i.stats.overdue_count>0?"text-danger":"text-success"])},null,8,["class"]),e[10]||(e[10]=t("p",{class:"text-xs text-theme-text-secondary uppercase tracking-wider"},"En retard",-1))]),t("p",{class:y(["text-xl font-semibold",i.stats.overdue_count>0?"text-danger":"text-success"])},n(i.stats.overdue_count),3),e[11]||(e[11]=t("p",{class:"text-xs text-theme-text-muted"},"échéance(s)",-1))])]),r(g).length>0?(d(),a("div",nt,[e[13]||(e[13]=t("h2",{class:"text-xs font-medium text-theme-text-secondary uppercase tracking-wider mb-3"},"Je dois",-1)),t("div",dt,[(d(!0),a(_,null,C(r(g),s=>(d(),a("div",{key:s.id,class:"p-4"},[t("div",at,[t("div",null,[t("p",it,n(s.name),1),t("p",lt,n(s.contact_name||"Pas de contact"),1)]),t("div",ct,[t("button",{onClick:l=>j(s),class:"px-2 py-1 text-xs bg-theme-surface border border-theme-border rounded hover:border-theme-text-secondary transition-colors"}," Payer ",8,mt),c(r(f),{href:`/debts/${s.id}/edit`,class:"text-xs text-theme-text-secondary hover:text-theme-text-primary"},{default:b(()=>[...e[12]||(e[12]=[v("Modifier",-1)])]),_:1},8,["href"]),t("button",{onClick:l=>w(s),class:"text-xs text-theme-text-secondary hover:text-danger"},"Supprimer",8,xt)])]),p.value===s.id?(d(),a("div",ut,[P(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>r(x).amount=l),type:"number",min:"1",placeholder:"Montant",class:"flex-1 bg-theme-surface border border-theme-border rounded-md px-3 py-1.5 text-sm text-theme-text-primary focus:border-theme-text-primary focus:ring-0 outline-none"},null,512),[[F,r(x).amount,void 0,{number:!0}]]),t("button",{onClick:l=>D(s),disabled:r(x).processing||!r(x).amount,class:"px-3 py-1.5 bg-theme-btn-primary-bg text-theme-btn-primary-text text-sm font-medium rounded-md hover:opacity-90 disabled:opacity-50"},"Payer",8,ht),t("button",{onClick:e[1]||(e[1]=l=>p.value=null),class:"px-3 py-1.5 text-sm text-theme-text-secondary hover:text-theme-text-primary border border-theme-border rounded-md"},"Annuler")])):u("",!0),t("div",pt,[t("span",bt,n(m(s.initial_amount-s.current_amount))+" payé / "+n(m(s.initial_amount)),1),t("span",yt,"Reste "+n(m(s.current_amount)),1)]),t("div",ft,[t("div",{class:"h-full bg-danger rounded-full",style:S({width:`${A(s)}%`})},null,4)]),s.due_date?(d(),a("p",vt,"Échéance : "+n($(s.due_date)),1)):u("",!0)]))),128))])])):u("",!0),r(k).length>0?(d(),a("div",_t,[e[15]||(e[15]=t("h2",{class:"text-xs font-medium text-theme-text-secondary uppercase tracking-wider mb-3"},"On me doit",-1)),t("div",gt,[(d(!0),a(_,null,C(r(k),s=>(d(),a("div",{key:s.id,class:"p-4"},[t("div",kt,[t("div",null,[t("p",wt,n(s.name),1),t("p",Ct,n(s.contact_name||"Pas de contact"),1)]),t("div",$t,[t("button",{onClick:l=>j(s),class:"px-2 py-1 text-xs bg-theme-surface border border-theme-border rounded hover:border-theme-text-secondary transition-colors"}," Reçu ",8,Mt),c(r(f),{href:`/debts/${s.id}/edit`,class:"text-xs text-theme-text-secondary hover:text-theme-text-primary"},{default:b(()=>[...e[14]||(e[14]=[v("Modifier",-1)])]),_:1},8,["href"]),t("button",{onClick:l=>w(s),class:"text-xs text-theme-text-secondary hover:text-danger"},"Supprimer",8,jt)])]),p.value===s.id?(d(),a("div",Dt,[P(t("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>r(x).amount=l),type:"number",min:"1",placeholder:"Montant reçu",class:"flex-1 bg-theme-surface border border-theme-border rounded-md px-3 py-1.5 text-sm text-theme-text-primary focus:border-theme-text-primary focus:ring-0 outline-none"},null,512),[[F,r(x).amount,void 0,{number:!0}]]),t("button",{onClick:l=>D(s),disabled:r(x).processing||!r(x).amount,class:"px-3 py-1.5 bg-theme-btn-primary-bg text-theme-btn-primary-text text-sm font-medium rounded-md hover:opacity-90 disabled:opacity-50"},"Enregistrer",8,At),t("button",{onClick:e[3]||(e[3]=l=>p.value=null),class:"px-3 py-1.5 text-sm text-theme-text-secondary hover:text-theme-text-primary border border-theme-border rounded-md"},"Annuler")])):u("",!0),t("div",Pt,[t("span",Ft,n(m(s.initial_amount-s.current_amount))+" reçu / "+n(m(s.initial_amount)),1),t("span",St,"Reste "+n(m(s.current_amount)),1)]),t("div",Bt,[t("div",{class:"h-full bg-success rounded-full",style:S({width:`${A(s)}%`})},null,4)]),s.due_date?(d(),a("p",Nt,"Échéance : "+n($(s.due_date)),1)):u("",!0)]))),128))])])):u("",!0),r(g).length===0&&r(k).length===0?(d(),a("div",Vt,[e[17]||(e[17]=t("p",{class:"text-sm text-theme-text-secondary mb-4"},"Aucune dette ou créance active",-1)),c(r(f),{href:"/debts/create",class:"text-sm text-theme-text-primary hover:underline"},{default:b(()=>[...e[16]||(e[16]=[v("Ajouter une entrée",-1)])]),_:1})])):u("",!0),r(M).length>0?(d(),a("div",Zt,[e[19]||(e[19]=t("h2",{class:"text-xs font-medium text-theme-text-secondary uppercase tracking-wider mb-3"},"Historique (Payé)",-1)),t("div",Rt,[t("table",Et,[e[18]||(e[18]=t("thead",null,[t("tr",{class:"border-b border-theme-border"},[t("th",{class:"px-4 py-3 text-left text-xs font-medium text-theme-text-secondary uppercase tracking-wider"},"Nom"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-theme-text-secondary uppercase tracking-wider"},"Type"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-theme-text-secondary uppercase tracking-wider"},"Montant"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-theme-text-secondary uppercase tracking-wider"},"Actions")])],-1)),t("tbody",Lt,[(d(!0),a(_,null,C(r(M),s=>(d(),a("tr",{key:s.id},[t("td",Ot,n(s.name),1),t("td",{class:y(["px-4 py-3 text-sm",s.type==="debt"?"text-danger":"text-success"])},n(s.type==="debt"?"Dette":"Créance"),3),t("td",Tt,n(m(s.initial_amount)),1),t("td",zt,[t("button",{onClick:l=>w(s),class:"text-xs text-theme-text-secondary hover:text-danger"},"Supprimer",8,Ht)])]))),128))])])])])):u("",!0)])]),_:1})],64))}};export{Ut as default};
