import{u as h,o as s,c as n,a as l,b as r,h as b,d as e,F as i,k as d,e as v,f as m,v as u,t as x,m as p,w as g,l as _,E as k}from"./app-CsYUhu0f.js";const w={class:"min-h-screen bg-theme-bg flex items-center justify-center p-4"},V={class:"w-full max-w-sm"},C={class:"text-theme-text-secondary text-sm mb-6"},X={key:0},E={key:0,class:"mt-2 text-xs text-danger"},F={key:1},N={key:0,class:"mt-2 text-xs text-danger"},U=["disabled"],B={key:0},M={key:1},T={class:"text-center space-y-2"},R={__name:"TwoFactorChallenge",setup(q){const a=k(!1),t=h({code:"",recovery_code:""}),f=()=>{t.post("/two-factor-challenge")},y=()=>{a.value=!a.value,t.code="",t.recovery_code="",t.clearErrors()};return(z,o)=>(s(),n(i,null,[l(r(b),{title:"Vérification en deux étapes"}),e("div",w,[e("div",V,[o[5]||(o[5]=e("div",{class:"text-center mb-10"},[e("img",{src:"/images/logo.png",alt:"Morex",class:"h-10 w-auto mx-auto mb-4"}),e("p",{class:"text-theme-text-secondary text-sm"},"Vérification en deux étapes")],-1)),e("p",C,[a.value?(s(),n(i,{key:1},[d(" Entrez l'un de vos codes de récupération. ")],64)):(s(),n(i,{key:0},[d(" Entrez le code à 6 chiffres généré par votre application d'authentification. ")],64))]),e("form",{onSubmit:v(f,["prevent"]),class:"space-y-5"},[a.value?(s(),n("div",F,[o[3]||(o[3]=e("label",{for:"recovery_code",class:"block text-xs font-medium text-theme-text-secondary uppercase tracking-wider mb-2"}," Code de récupération ",-1)),m(e("input",{id:"recovery_code","onUpdate:modelValue":o[1]||(o[1]=c=>r(t).recovery_code=c),type:"text",required:"",autofocus:"",class:"w-full bg-theme-surface border border-theme-border rounded-md px-4 py-3 text-theme-text-primary text-sm text-center tracking-widest font-mono placeholder-theme-text-muted focus:border-white focus:ring-0 outline-none transition-colors",placeholder:"XXXX-XXXX"},null,512),[[u,r(t).recovery_code]]),r(t).errors.recovery_code?(s(),n("p",N,x(r(t).errors.recovery_code),1)):p("",!0)])):(s(),n("div",X,[o[2]||(o[2]=e("label",{for:"code",class:"block text-xs font-medium text-theme-text-secondary uppercase tracking-wider mb-2"}," Code d'authentification ",-1)),m(e("input",{id:"code","onUpdate:modelValue":o[0]||(o[0]=c=>r(t).code=c),type:"text",inputmode:"numeric",maxlength:"6",required:"",autofocus:"",autocomplete:"one-time-code",class:"w-full bg-theme-surface border border-theme-border rounded-md px-4 py-3 text-theme-text-primary text-sm text-center tracking-widest font-mono placeholder-theme-text-muted focus:border-white focus:ring-0 outline-none transition-colors",placeholder:"000000"},null,512),[[u,r(t).code]]),r(t).errors.code?(s(),n("p",E,x(r(t).errors.code),1)):p("",!0)])),e("button",{type:"submit",disabled:r(t).processing,class:"w-full bg-theme-btn-primary-bg text-theme-btn-primary-text font-medium py-3 px-4 rounded-md hover:opacity-90 transition-colors disabled:opacity-50 text-sm"},[r(t).processing?(s(),n("span",B,"Vérification...")):(s(),n("span",M,"Vérifier"))],8,U),e("div",T,[e("button",{type:"button",onClick:y,class:"text-sm text-theme-text-secondary hover:text-theme-text-primary transition-colors"},[a.value?(s(),n(i,{key:1},[d(" Utiliser le code d'authentification ")],64)):(s(),n(i,{key:0},[d(" Utiliser un code de récupération ")],64))]),e("div",null,[l(r(_),{href:"/login",class:"text-sm text-theme-text-muted hover:text-theme-text-secondary transition-colors"},{default:g(()=>[...o[4]||(o[4]=[d(" Annuler ",-1)])]),_:1})])])],32)])])],64))}};export{R as default};
